#!/usr/bin/env bash
# exp-outputs -- enumerate experiment outputs
# Usage: exp outputs [NAME]...
#
# Author: Jaeho Shin <netj@cs.stanford.edu>
# Created: 2012-11-07
set -eu
shopt -s extglob

EXPROOT=$(exp-findroot)
export EXPROOT

cd "$EXPROOT"
cd output

[ $# -gt 0 ] || set -- [A-Za-z_]*([A-Za-z0-9_])/

for name; do
    [ -e "$name" ] || error "$name: No such output variable"
    name=${name%/}
    typefile="$name/datatype"
    type=$(cat "$typefile" 2>/dev/null || echo)
    case $type in
        nominal|ordinal|interval|ratio)
            # Stanley Stevens' theory of scale types
            # http://en.wikipedia.org/wiki/Level_of_measurement
            ;;
        "")
            type=ratio
            ;;
        *)
            # user defined data type
            ;;
    esac
    echo "$name:$type"
done
